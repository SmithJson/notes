
<!-- vim-markdown-toc GitLab -->

* [减少 DOM 数量](#减少-dom-数量)
* [优化大量 DOM](#优化大量-dom)
	* [缓存 DOM 对象](#缓存-dom-对象)
	* [文档片段](#文档片段)
	* [批量读，一次写](#批量读一次写)
	* [虚拟 dom](#虚拟-dom)

<!-- vim-markdown-toc -->

## 减少 DOM 数量

- 使用伪元素，阴影实现内容j尽量不实用 Dom 实现，例如清除浮动、样式实现
- 使用按需加载
- 结构合理，使用语义化标签

## 优化大量 DOM

对 DOM 的访问和修改都会引起回流和重绘，十分消耗性能，所以应从以下几点出发：

1. 缓存 DOM 对象	
2. 使用文档片段，只有文档片段替换旧 dom 才会触发一次回流
3. 使用 innerHtml 替换高频率的 appendChil
4. 批量读，一次写，将重绘操作放在 requestAnimationFrame 函数中
5. 使用虚拟 dom

### 缓存 DOM 对象

可以将循环遍历中，会频繁访问的 dom，使用变量存储起来，这样每次访问都能进行 dom 复用

### 文档片段

通过 document.creatDocumentFragment() 创建文档片段节点，将要操作的节点插入文档片段中，在文档片段里进行一些列的操作，使用文档片段替换旧节点，这样只会触发一次回流操作

### 批量读，一次写

将 dom 节点从页面删除，然后在对该节点进行一些列操作，由于不在 render tree 中，所以此时如果对该节点进行的操作，并不会触发回流和重绘，节点操作完毕后，将节点又添加会页面，此过程会触发两次回流

### 虚拟 dom

js 模拟 dom 树并对 dom 树操作的一种技术。利用 virtual dom，将 dom 抽象为虚拟 dom，在 dom 发送变化时先对虚拟 dom 进行操作，然后通过 dom diff 算法将虚拟 dom 和原虚拟 dom 的结构做比对，最后批量的去修改真实 dom 结构
