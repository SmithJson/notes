
<!-- vim-markdown-toc GitLab -->

* [一. 自我介绍](#一-自我介绍)
* [二. 问题](#二-问题)
	* [1. 前端常常需要和后端打交道，访问他们提供的 api，那你能说下状态码吗？](#1-前端常常需要和后端打交道访问他们提供的-api那你能说下状态码吗)
		* [不足](#不足)
		* [改版](#改版)
	* [2. 那你能说下它们（状态码）的使用场景吗？](#2-那你能说下它们状态码的使用场景吗)
		* [不足](#不足-1)
		* [改版](#改版-1)
	* [3. 发布订阅模式实现及代码讲解](#3-发布订阅模式实现及代码讲解)
	* [4. 发布订阅的应用场景](#4-发布订阅的应用场景)
	* [5. TCP/IP 为什么是三次握手，不是二次或四次？](#5-tcpip-为什么是三次握手不是二次或四次)
		* [不足,](#不足-2)
		* [改版](#改版-2)

<!-- vim-markdown-toc -->

## 一. 自我介绍

面试官您好，我叫一叶小和尚，巴拉巴拉...

## 二. 问题

### 1. 前端常常需要和后端打交道，访问他们提供的 api，那你能说下状态码吗？

好的面试官，我就说我常遇到的吧

 - 200：请求成功
 - 301：永久重定向
 - 302: 临时重定向
 - 304：访问资源的缓存没有失效，让浏览器直接从缓存中读取
 - 401：forbidden 未授权访问
 - 403：拒接访问
 - 404：请求失败，请求的资源连接失效
 - 500：服务器遇到位置错误，一般是后端代码出现错误
 
#### 不足

1. 没有说明状态码的作用
2. 没有说明状态码的大致分类

#### 改版

状态码用于说明本次请求的请求状态，大致分为以五类

- 1XX：信息类，服务接受到请求，需要请求者继续执行操作
- 2XX：成功类，操作被成功接收并处理
- 3XX：重定向类，需要进一步的操作以完成操作
- 4XX：客户端错误，请求包含语法错误或无法完成请求
- 5XX：服务器错误，服务器在处理过程中出现错误

常见的状态码有【每个类型至少举例一个】：

- 100：客户端应继续其请求
- 101：协议切换
- 200：请求成功
- 202：已经接收请求，但未处理完成
- 301：永久重定向，浏览器自动定向到新 URL
- 302：临时重定向, 浏览建议使用原 URL
- 304：未修改
- 307：临时重定响，与 302 类似，但302只能用于 GET请求, 307 用于 POST 请求
- 400：客户端请求存在语法错误
- 401：请求要求用户的身份认证
- 403：服务端接收了客户端请求，但拒绝执行次请求
- 404：服务器无法根据客户端的请求找到资源
- 500：服务端内部错误，无法完成请求
- 503：服务不可用

### 2. 那你能说下它们（状态码）的使用场景吗？ 

面试的时候没明白什么意思

#### 不足

没碰到使用场景，计网白学了

#### 改版

- 301
	+ 域名到期了，想换个新域名
	+ 空间服务器不稳定，换个空间的时候
	+ 可以告诉搜索引擎目标域名是哪一个

扩展下对 SEO 的影响：
> 搜索引擎优化。
> 当网站的域名发生变更后，搜索引擎只对新网址进行索引，并且将原网址的外链数量转移到新网址下，保证网站的排名不受变更影响；
> 使用 301 让多个域名指向主域名时，也不会对排名产生任何影响

- 302：当一个网站或网页被暂时性的转移到另一个新位置的时候

扩展下对 SEO 的影响：
> 影响搜索引擎优化。
> 当有多个域名使用 302 指向主域名时，只有 google 会把其他域名的外链数量计入主域，而其他搜索引擎会向多个域名分摊，从而减少了主域名的外链总数。
> 外链数量是网站排名的关键因素之一。

- 304：浏览器的协商缓存
- 401：用户的有效性验证
- 403：用户的访问权限控制

### 3. 发布订阅模式实现及代码讲解

```javascript
class PubSub {
    constructor() {
        this.subscribes = [];
    }

    // 订阅
    subscribe(topic, callback) {
        if (!this.subscribes[topic]) {
            this.subscribes[topic] = [];
        }
        this.subscribes[topic].push(callback);
    }

    // 发布
    publish(topic, ...args) {
        if (!this.subscribes[topic]) {
            return;
        }
        this.subscribes[topic].forEach(item => item(...args));
    }
}

const ps = new PubSub();

ps.subscribe("s1", (data) =>  console.log(data, "S1"));
ps.subscribe("s1", (data) =>  console.log(data, "S1.1"));
ps.subscribe("s2", (data) =>  console.log(data, "S2"));

ps.publish("s1", "Hello World");
```

### 4. 发布订阅的应用场景

1. Node.js 的事件驱动程序
2. websocket 的双向通信
3. vue 的双向数据绑定

### 5. TCP/IP 为什么是三次握手，不是二次或四次？

因为 TCP 是可靠传输协议，只需要保证通信双方的接收能力完整的即可。如果只进行两次的握手的话，服务器无法确定客户端是否接收到了 ACK 报文，这时候服务器在发送数据的话，有可能会导致数据丢失；如果进行四次的话，感觉就有点多余了。

#### 不足,

没有说明为什么 TCP 是可靠传输协议，进一步来就是没有说明 TCP 是怎么实现可靠传输的。

#### 改版


&nbsp;&nbsp;因为 TCP 是可靠传输协议，只需要保证通信双方的接收能力完整的即可。如果只进行两次的握手的话，服务器无法确定客户端是否接收到了 ACK 报文，这时候服务器在发送数据的话，有可能会导致数据丢失；如果进行四次的话，感觉就有点多余了。   
&nbsp;&nbsp;使用停止等待协议保证了 TCP 的可靠传输，停止等待协议要求只有在接收到请求报文对应的响应报文后，才能发下一个请求报文，如果过了等待时间后，还没收到响应报文，则继续发送该请求报文。这种协议优点是简单、易实现，但缺点也很明显就是信利用率低。`所以推出了 ARQ 协议解决这一问题【拓展】`。
